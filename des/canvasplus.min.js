!function(){"use strict";function t(t){this.canvas=t,this.context=t.getContext("2d")}window.Canvasplus||(window.Canvasplus=t)}(),function(t){"use strict";var n=10,o="rgba(0,0,0,1)";t.prototype.normalBrush=function(t,e){function a(t,n){c=!0,v=n}function i(n,e){c&&(l.save(),l.globalCompositeOperation="source-over",l.beginPath(),l.lineCap="round",l.lineJoin="round",l.moveTo(v.x,v.y),l.lineTo(e.x,e.y),l.lineWidth=t,l.strokeStyle=o,l.stroke(),l.restore(),v=e)}function r(t,n){c=!1,v=null}var s=this;t||(t=n),e||(e=o);var l=(s.canvas,s.context),c=!1,v=null;s.bindEvent("start",a),s.bindEvent("move",i),s.bindEvent("end",r)},t.prototype.penciltest=function(t,o){console.log(t),console.log(o);for(var e=this,a=e.context,i=o,r=n,s=r/2,l=i.x-t.x,c=i.y-t.y,v=Math.sqrt(l*l+c*c),h=(Math.abs(l),Math.abs(c),l/v),u=c/v,y=0;v>y;y++)for(var x={x:t.x+y*h,y:t.y+y*u},f=-s;s>=f;f++){var d={x:x.x-f*u,y:x.y+f*h};a.save(),a.beginPath(),a.moveTo(d.x,d.y),a.lineTo(d.x+1,d.y),a.lineTo(d.x+1,d.y+1),a.lineTo(d.x,d.y+1),a.closePath();{Math.floor(100*Math.random())/100}a.fillStyle="rgba(0,0,0,0.8)",a.fill(),a.restore()}},t.prototype.pencil=function(t){function o(t,n){s=!0,l={x:Math.floor(n.x),y:Math.floor(n.y)}}function e(n,o){if(o={x:Math.floor(o.x),y:Math.floor(o.y)},s){for(var e=t/2,a=o.x-l.x,i=o.y-l.y,c=Math.sqrt(a*a+i*i),v=(Math.abs(a),Math.abs(i),a/c),h=i/c,u=0;c>u;u++)for(var y={x:l.x+u*v,y:l.y+u*h},x=-e;e>=x;x++){var f={x:y.x-x*h,y:y.y+x*v};r.save(),r.beginPath(),r.moveTo(f.x,f.y),r.lineTo(f.x+1,f.y),r.lineTo(f.x+1,f.y+1),r.lineTo(f.x,f.y+1),r.closePath();var d=Math.floor(100*Math.random())/100;r.fillStyle="rgba(0,0,0,{@randoma})".replace(/{@randoma}/,d),r.fill(),r.restore()}l=o}}function a(t,n){s=!1,l=null}var i=this;t||(t=n);var r=(i.canvas,i.context),s=!1,l=null;i.bindEvent("start",o),i.bindEvent("move",e),i.bindEvent("end",a)},t.prototype.bindEvent=function(t,n){var o,e,a,i=this;switch(t){case"start":o="mousedown",e="touchstart";break;case"move":o="mousemove",e="touchmove";break;case"end":o="mouseup",e="touchend"}i.canvas.addEventListener(o,function(t){a={x:t.clientX,y:t.clientY},n(t,i.posConvert(a))}),i.canvas.addEventListener(e,function(t){a={x:t.touches[0].clientX,y:t.touches[0].clientY},n(t,i.posConvert(a))})},t.prototype.posConvert=function(t){var n=this,o=n.canvas,e=o.getBoundingClientRect();return{x:t.x-e.left*(o.width/e.width),y:t.y-e.top*(o.height/e.height)}}}(Canvasplus);