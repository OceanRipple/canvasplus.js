!function(){"use strict";function t(t){this.canvas=t,this.context=t.getContext("2d"),this.width=t.width,this.height=t.height}window.Canvasplus||(window.Canvasplus=t)}(),function(t){"use strict";var n=10,e="rgba(0,0,0,1)";t.prototype.normalBrush=function(t,o){function r(t,n){c=!0,h=n}function i(n,o){c&&(d=o,s.save(),s.globalCompositeOperation="source-over",s.beginPath(),s.lineCap="round",s.lineJoin="round",s.moveTo(h.x,h.y),s.lineTo(d.x,d.y),s.lineWidth=t,s.strokeStyle=e,s.stroke(),s.restore(),h=d)}function a(t,n){c=!1,h=null,d=null}var u=this;t||(t=n),o||(o=e);var s=(u.canvas,u.context),c=!1,h=null,d=null;u.bindEvent("start",r),u.bindEvent("move",i),u.bindEvent("end",a)},t.prototype.bindEvent=function(t,n){var e,o,r,i=this;switch(t){case"start":e="mousedown",o="touchstart";break;case"move":e="mousemove",o="touchmove";break;case"end":e="mouseup",o="touchend"}i.canvas.addEventListener(e,function(t){r={x:t.clientX,y:t.clientY},n(t,i.posConvert(r))}),i.canvas.addEventListener(o,function(t){r={x:t.touches[0].clientX,y:t.touches[0].clientY},n(t,i.posConvert(r))})},t.prototype.posConvert=function(t){var n=this,e=n.canvas,o=e.getBoundingClientRect();return{x:t.x-o.left*(e.width/o.width),y:t.y-o.top*(e.height/o.height)}}}(Canvasplus),!function(t){Uint8ClampedArray.prototype.reduce=function(t,n){var e=this,o=n,r=0;if("undefined"===o&&(o=e[0],r=1),"function"==typeof t)for(r;r<e.length;r++)e.hasOwnProperty(r)&&(o=t(o,e[r],r,e));return o},Uint8ClampedArray.prototype.map=function(t,n){var e=new Uint8ClampedArray(this.length);if("function"==typeof t)for(var o=0,r=this.length;r>o;o++)e[o]=fn.call(n,this[o],o,this);return e},t.prototype.matrixCreater=function(t){var n=this,e=t.width,o=(t.height,t.data),r=[];if(o.constructor.name!==Uint8ClampedArray.name)throw"not a imagedata";for(var i=0;i<n.height;i++){var a=4*i*e;r.push(o.subarray(a,a+4*e))}return n.matrixStack=[],n.matrix=r,n.imageData=t,n},t.prototype.dotProduct=function(t,n){if(t.length!==n.length)throw"error dot droduct";var e=t.reduce(function(t,e,o,r){return Number(t)+Number(e*n[o])},0);return e},t.prototype.mxv=function(t){var n=this,e=n.matrix.map(function(e){return n.dotProduct(e,t)});return n.matrixStack.push(e),e},t.prototype.mxm=function(){}}(Canvasplus);