!function(){"use strict";function t(t){this.canvas=t,this.context=t.getContext("2d"),this.width=t.width,this.height=t.height}window.Canvasplus||(window.Canvasplus=t)}(),function(t){"use strict";var n=10,e="rgba(0,0,0,1)";t.prototype.normalBrush=function(t,r){function a(t,n){s=!0,d=n}function o(n,r){s&&(c=r,u.save(),u.globalCompositeOperation="source-over",u.beginPath(),u.lineCap="round",u.lineJoin="round",u.moveTo(d.x,d.y),u.lineTo(c.x,c.y),u.lineWidth=t,u.strokeStyle=e,u.stroke(),u.restore(),d=c)}function i(t,n){s=!1,d=null,c=null}var h=this;t||(t=n),r||(r=e);var u=(h.canvas,h.context),s=!1,d=null,c=null;h.bindEvent("start",a),h.bindEvent("move",o),h.bindEvent("end",i)},t.prototype.bindEvent=function(t,n){var e,r,a,o=this;switch(t){case"start":e="mousedown",r="touchstart";break;case"move":e="mousemove",r="touchmove";break;case"end":e="mouseup",r="touchend"}o.canvas.addEventListener(e,function(t){a={x:t.clientX,y:t.clientY},n(t,o.posConvert(a))}),o.canvas.addEventListener(r,function(t){a={x:t.touches[0].clientX,y:t.touches[0].clientY},n(t,o.posConvert(a))})},t.prototype.posConvert=function(t){var n=this,e=n.canvas,r=e.getBoundingClientRect();return{x:t.x-r.left*(e.width/r.width),y:t.y-r.top*(e.height/r.height)}}}(Canvasplus),!function(t){function n(t){var n=t.width,e=t.height,r=t.data,a=[];if(r.constructor.name!==Uint8ClampedArray.name)throw"not a imagedata";for(var o=0;e>o;o++){var i=o*n*4;a.push(r.subarray(i,i+4*n))}return{width:n,height:e,data:a}}function e(t,n){if(t.length!==n.length)throw"error dot droduct";var e=t.reduce(function(t,e,r,a){return Number(t)+Number(e*n[r])},0);return e}function r(t){for(var n=[],e=0;e<4*t.width;e+=4){for(var r=[],a=0;a<t.height;a++)r.push(t.data[a][e]),r.push(t.data[a][e+1]),r.push(t.data[a][e+2]),r.push(t.data[a][e+3]);n.push(r)}return{data:n,width:t.height,height:t.width}}function a(t){for(var n=t.data,e=t.width,r=t.height,a=new Uint8ClampedArray(e*r*4),o=0;r>o;o++)for(var i=0;4*e>i;i++){var h=o*e*4+i;a[h]=n[o][i]}return new ImageData(a,e,r)}function o(t,n){n=r(n),mm=[];for(var a=0;a<t.height;a++){for(var o=[],i=0;i<n.height;i++)o.push(e(t.data[a],n.data[i]));mm.push(o)}return{data:mm,width:n.height,height:t.height}}Uint8ClampedArray.prototype.reduce=function(t,n){var e=this,r=n,a=0;if("undefined"===r&&(r=e[0],a=1),"function"==typeof t)for(a;a<e.length;a++)e.hasOwnProperty(a)&&(r=t(r,e[a],a,e));return r},Uint8ClampedArray.prototype.map=function(t,n){var e=new Uint8ClampedArray(this.length);if("function"==typeof t)for(var r=0,a=this.length;a>r;r++)e[r]=fn.call(n,this[r],r,this);return e},t.prototype.matrix=n,t.prototype.mxm=o,t.prototype.flat=a,t.prototype.trans=r}(Canvasplus);