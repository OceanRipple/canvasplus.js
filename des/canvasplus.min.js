!function(){"use strict";function t(t){this.canvas=t,this.context=t.getContext("2d"),this.width=t.width,this.height=t.height}window.Canvasplus||(window.Canvasplus=t)}(),function(t){"use strict";var n=10,e="rgba(0,0,0,1)";t.prototype.normalBrush=function(t,r){function o(t,n){s=!0,c=n}function i(n,r){s&&(d=r,u.save(),u.globalCompositeOperation="source-over",u.beginPath(),u.lineCap="round",u.lineJoin="round",u.moveTo(c.x,c.y),u.lineTo(d.x,d.y),u.lineWidth=t,u.strokeStyle=e,u.stroke(),u.restore(),c=d)}function a(t,n){s=!1,c=null,d=null}var h=this;t||(t=n),r||(r=e);var u=(h.canvas,h.context),s=!1,c=null,d=null;h.bindEvent("start",o),h.bindEvent("move",i),h.bindEvent("end",a)},t.prototype.bindEvent=function(t,n){var e,r,o,i=this;switch(t){case"start":e="mousedown",r="touchstart";break;case"move":e="mousemove",r="touchmove";break;case"end":e="mouseup",r="touchend"}i.canvas.addEventListener(e,function(t){o={x:t.clientX,y:t.clientY},n(t,i.posConvert(o))}),i.canvas.addEventListener(r,function(t){o={x:t.touches[0].clientX,y:t.touches[0].clientY},n(t,i.posConvert(o))})},t.prototype.posConvert=function(t){var n=this,e=n.canvas,r=e.getBoundingClientRect();return{x:t.x-r.left*(e.width/r.width),y:t.y-r.top*(e.height/r.height)}}}(Canvasplus),!function(t){function n(t){var n=4*t.width,e=t.height,r=t.data,o=[];if(r.constructor.name!==Uint8ClampedArray.name)throw"not a imagedata";for(var i=0;e>i;i++){var a=i*n;o.push(r.subarray(a,a+n))}return{width:n,height:e,data:o}}function e(t,n){if(t.length!==n.length)throw"error dot droduct";var e=t.reduce(function(t,e,r,o){return Number(t)+Number(e*n[r])},0);return e}function r(t){for(var n=[],e=0;e<t.width;e++){for(var r=new Uint8ClampedArray(t.height),o=0;o<t.height;o++)r[o]=t.data[o][e];n.push(r)}return{data:n,width:t.height,height:t.width}}function o(t){for(var n=t.data,e=t.width,r=t.height,o=new Uint8ClampedArray(e*r),i=0;r>i;i++)for(var a=0;e>a;a++){var h=i*r+a;o[h]=n[i][a]}return new ImageData(o,e/4,r)}function i(t,n){n=r(n),mm=[];for(var o=0;o<t.height;o++){for(var i=[],a=0;a<n.height;a++)i.push(e(t.data[o],n.data[a]));mm.push(i)}return{data:mm,width:n.height,height:t.height}}Uint8ClampedArray.prototype.reduce=function(t,n){var e=this,r=n,o=0;if("undefined"===r&&(r=e[0],o=1),"function"==typeof t)for(o;o<e.length;o++)e.hasOwnProperty(o)&&(r=t(r,e[o],o,e));return r},Uint8ClampedArray.prototype.map=function(t,n){var e=new Uint8ClampedArray(this.length);if("function"==typeof t)for(var r=0,o=this.length;o>r;r++)e[r]=fn.call(n,this[r],r,this);return e},t.prototype.matrix=n,t.prototype.mxm=i,t.prototype.flat=o,t.prototype.trans=r}(Canvasplus);